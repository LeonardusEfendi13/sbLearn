<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/lessons.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/a59b9b09ab.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>


    <title>Spring Boot Learn</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #070F2B; font-weight:bold;width: 100%;">
        <a class="navbar-brand" href="/home">
            <img class="logo" src="/Assets/logoSpringBoot.png" />
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item-sb ">
                    <a class="nav-link" href="/home">Home</a>
                </li>
                <li class="nav-item-sb ">
                    <a class="nav-link" href="/leaderboard">Leaderboard</a>
                </li>
                <li class="nav-item-sb">
                    <a class="nav-link" href="/profile">
                        <span th:text="${user.name}"></span>
                        <img class="profile-pic" th:src="'/Assets/' + ${user.profilePictureName} + '.png'"/></a>
                    </a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0" action="/logout" method="get">
                <button type="submit" class="btn btn-outline-danger my-2 my-sm-0">Log Out
                </button>
            </form>
        </div>
    </nav>
    <!-- START BOX MATERI -->
    <div class="row justify-content-center align-items-center" style="margin: 0;">
        <div class="box-lesson">
            <div class="row align-items-center heading-materi" style="margin: 0;">
                <div class="col-md-3">
                    <div class="backBtn">
                        <a style="color: white; font-size: 14px;font-weight: bold;" href="/home"><img
                                src="/Assets/kembali.png" style="width: 25px;margin-right: 10px;">Kembali</a>
                    </div>
                </div>

                <div class="col-md-9" style="margin: 0;padding: 0;">
                    <div class="d-flex justify-content-end" style="margin: 0;">
                        <div class="coin text-center">
                            <img src="/Assets/coin.png" style="width: 25px;" />
                            <span th:text="${user.gold}"></span>
                        </div>
                        <div class="life text-center">
                            <div th:each="i : ${#numbers.sequence(1, 3)}" th:remove="tag">
                                <!-- If i is less than or equal to the count from the database -->
                                <img th:if="${i le user.life}" th:id="'image' + ${i}" th:src="@{/Assets/Life.png}"
                                    alt="Image" style="width: 25px; margin-left: 5px;" /> <!-- Example style -->
                                <!-- If i is greater than the count from the database -->
                                <img th:if="${i gt user.life}" id="other-image" th:src="@{/Assets/emptyLife.png}"
                                    alt="Other Image" style="width: 25px; margin-left: 5px;" /> <!-- Example style -->
                            </div>
                        </div>
                        <!-- Additional content -->
                        <img th:if="${user.life < 3}" id="addLife" src="/Assets/add.png" data-target="#modalTambahLife"
                            data-toggle="modal" style="cursor:pointer;width: 25px;" />
                    </div>
                </div>
            </div>

            <div id="soal2" class="displayLesson show">
                <div class="row justify-content-center align-items-center lesson-title" style="margin: 0;">
                    CRUD pada Springboot (2/4)
                </div>

                <div class="row justify-content-center align-items-center" style="margin:0">
                    <div class="box-materi">
                        <div class="row" style="margin: 0;margin-bottom: 20px;">
                            <img class="image-lesson"
                                 src="/Assets/C4L2.1.png"/>
                        </div>
                        Untuk mengimplementasikan fungsi “Read” untuk seluruh data, maka kita perlu membuat method yang
                        bertipe data List dengan tipe data List tersebut adalah Entity yang kita tuju. Kemudian method
                        ini akan mengembalikan keseluruhan data dengan memanggil kembali nama repository yaitu
                        “productRepository” dan menggunakan fungsi bawaan repository yaitu “.findAll()” untuk menemukan
                        seluruh data. <br> <br>

                        Apabila hanya ingin melakukan “Read” pada data dengan parameter tertentu, maka repository juga
                        memiliki fungsi otomatis, contohnya adalah findById(id) jika parameter tersebut adalah Id.
                        <br><br>
                        <div class="row" style="margin: 0;margin-bottom: 20px;">
                            <img class="image-lesson"
                                 src="/Assets/C4L2.2.png"/>
                        </div>
                    </div>
                </div>
                <div class="row justify-content-center align-items-center" style="margin: 0;">
                    <div class="box-question">
                        <form class="answerForm" id="form2">
                            <div class="form-group">
                                <label for="question" th:text="${lessons4.get(1).questions}"></label>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="answer" id="a" value="a" th:checked="${ansFromUser == 'a'}" disabled>
                                    <label class="form-check-label" for="a">a. Tidak, karena repository telah
                                        memiliki fungsi “.findAll()” dan “.findById()” yang merupakan fungsi otomatis
                                        dari repository JPA.</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="answer" id="b" value="b" th:checked="${ansFromUser == 'b'}" disabled>
                                    <label class="form-check-label" for="b">b. Ya, karena repository belum
                                        memiliki fungsi “.findAll()” dan “.findById()”</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="answer" id="c" value="c" th:checked="${ansFromUser == 'c'}" disabled>
                                    <label class="form-check-label" for="c">c. Ya, karena tidak ada fungsi
                                        “.findAll()” dan “.findById()” pada Springboot dengan repository JPA</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="radio" name="answer" id="d" value="d" th:checked="${ansFromUser == 'd'}" disabled>
                                    <label class="form-check-label" for="d">d. Ya, karena repository JPA memiliki
                                        fungsi “.findAll” dan “.findById” dan bukan “.findAll()” dan
                                        “.findById()”</label>
                                </div>
                                <input type="hidden" id="ansFromUser" th:value="${ansFromUser}">
                                <input type="hidden" id="ansFromDb" th:value="${ansFromDb}">
                            </div>

                            <div class="lesson-Btn">
                                <div id="afterJawaban2" class="displayBtn" th:if="${lihatc4 == 'tidakLihat'}">
                                    <div class="nextButton">
                                        <button id="rightButton" class="btn button-edit" type="button"
                                                onclick="nextToLesson3()">Selanjutnya >>
                                        </button>
                                    </div>
                                </div>
                                <div id="afterJawaban2" class="displayBtnLihat" th:if="${lihatc4 == 'lihat'}">
                                    <div class="prevButton">
                                        <button id="leftButton" class="btn button-edit" type="button"
                                                onclick="prevToLesson1Lihat()">
                                            << Sebelumnya </button>
                                    </div>
                                    <div class="nextButton">
                                        <button id="rightButton" class="btn button-edit" type="button"
                                                onclick="nextToLesson3Lihat()">Selanjutnya >>
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </form>
                    </div>
                </div>
            </div>

        </div>
    </div>
    </div>

    <!-- MODAL Tambah Life -->
    <div class="modal fade" id="modalTambahLife" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" style="text-align: center;margin: 0 auto;font-weight: bold;">Konfirmasi
                        Penambahan Kesempatan</h5>
                </div>
                <div class="modal-body" style="text-align: center;" th:if="${user.gold >= 20}">
                    <p>Tambah 1 kesempatan?</p>
                    <p>Harga : <img src="/Assets/coin.png" style="width: 20px;"/> 20</p>
                    <p>Gold tersisa : <img src="/Assets/coin.png" style="width: 20px;"/> <span th:text="${user.gold}"></span></p>
                </div>
                <div class="modal-body" style="text-align: center;" th:if="${user.gold < 20}">
                    <p>Gold Anda tidak mencukupi, silakan menunggu pergantian hari untuk penambahan kesempatan</p>
                    <p>Gold tersisa :  <img src="/Assets/coin.png" style="width: 20px;"/> <span th:text="${user.gold}"></span></p>
                </div>
                <div class="modal-footer" th:if="${user.gold>=20}">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Batal</button>
                    <button type="button" class="btn btn-success" onclick="tambahLife()">Tambah</button>
                </div>
                <div class="modal-footer" th:if="${user.gold < 20}" >
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Tutup</button>
                </div>
            </div>
        </div>
    </div>
    <!-- END MODAL PEMBELIAN LIFE -->


    <footer class="footer">
        <div class="row justify-content-center align-items-center" style="width: 100%;margin:0;">
            <h5 style="color: white;margin-top: 20px;">Contact Us</h5>
        </div>
        <div class="row justify-content-center align-items-center" style="width: 100%;margin:0;height: 70px;">
            <a href="mailto:springbootlearn9@gmail.com">
                <p style="font-size: 14px;">springbootlearn9@gmail.com</p>
            </a>
        </div>
        <div class="row justify-content-center align-items-center"
            style="background-color: rgb(0, 0, 0); margin-top: 20px;width: 100%;margin:0">
            <p class="text-muted" style="padding: 5px;font-size: 14px;">Copyright @2024 All Rights Reserved.</p>
        </div>
    </footer>
    <script th:inline="javascript">
        // NEXT TO ANOTHER LESSON
        function nextToLesson3() {
            window.location.href="/Chapter4/Lesson3";
        }
        function nextToLesson3Lihat(){
            window.location.href="/Chapter4/Lesson3/Show";
        }
        function prevToLesson1Lihat(){
            window.location.href="/Chapter4/Lesson1/Show";
        }
        function tambahLife(){
            window.location.href ="/tambahLifec4l2Answer";
        }

        ansDb = document.getElementById('ansFromDb').value;
        ansUser = document.getElementById('ansFromUser').value;

        document.addEventListener('DOMContentLoaded', function() {
            // Get the answer from the database
            var ansFromDb = document.getElementById('ansFromDb').value;

            // Find the radio button corresponding to the answer from the database
            var radioToHighlight = document.querySelector('input[name="answer"][value="' + ansFromDb + '"]');

            // Add highlight class to the parent element of the radio button if found
            if (radioToHighlight) {
                radioToHighlight.parentElement.classList.add('highlight-radio');
            }
        });

    </script>
</body>


</html>